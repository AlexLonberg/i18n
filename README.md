
# i18n | internationalization

**i18n** –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–º—É Web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

    npm i @lonberg/i18n

* **i18n** - —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤(–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π) –≤–∞—à–µ–≥–æ Web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
* –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö, –∞ –ª–∏—à—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π API —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.
* **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω** - –∫–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å **i18n**. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –Ω–∞ –ª—é–±–æ–º —É—Ä–æ–≤–Ω–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è:

```ts
const settings = rootI18n.register('settings')
settings.set('system.theme', 'Interface Color Theme', 'en')

const i18n = rootI18n.getNamespace('settings.system')
i18n.t('theme') // => 'Interface Color Theme'
```

* **–ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π**: –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω `use('my.key', 'external.key')`. –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∞, –∞ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
* **–°–æ–±—ã—Ç–∏—è**: –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞–ª–∏ `on('locale', listener)` –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–π `on('key', listener)`.
* **–ü–ª–æ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–µ—Ä–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É `I18nRegistry` –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –ø–∞—Ä `Key -> Value`, —É—Å–∫–æ—Ä—è—è –¥–æ—Å—Ç—É–ø –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö. –ö–µ—à —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–ª—é—á–µ–π –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ `i18n.change(locale)`.
* **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: **i18n** –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ `TErrorDetail`.
* **TypeScript**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `Locale|Key|Value`.
* **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –†–∞—Å—à–∏—Ä—è–π—Ç–µ `SharedSingleton/I18nRegistry/I18nRoot`, –æ–ø—Ä–µ–¥–µ–ª–∏–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∏–ø `MyValueType`(–æ—Ç —Å—Ç—Ä–æ–∫–∏ –¥–æ —Å–ª–æ–∂–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞) –∏ –¥–æ–±–∞–≤—å—Ç–µ –ª—é–±—ã–µ –º–µ—Ç–æ–¥—ã `I18nRoot.t(key, ...)`. _–ï—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞._
* **–ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**.

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, **i18n** –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω —Å–ª–æ–∂–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –±—É–∫–≤–∞–ª—å–Ω–æ –≤ 10-20 —Å—Ç—Ä–æ–∫–∞—Ö –∫–æ–¥–∞. –†–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è [I18n](./src/impl.ts) —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è –æ—Ç [I18nRoot](./src/base.ts) –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Ç–∏–ø–æ–º `string`. –í–µ—Ä—Å–∏—è [ExI18n](./src/ex.ts) –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫(–∏–ª–∏ —Ç–æ–∫–µ–Ω–æ–≤ `{kind, value}`):

```ts
import { type TErrorDetail, ExI18n } from '@lonberg/i18n'

// –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª–∏ –∏ –∫–ª—é—á–∏
const i18n = ExI18n.createInstance<'en-US' | 'ru-RU', string>({
  locale: 'en-US',
  onError: logger // (error: TErrorDetail)
})

// –ü–æ –∂–µ–ª–∞–Ω–∏—é —Ç–∏–ø–∏–∑–∏—Ä—É–µ–º –∫–ª—é—á–∏ –∏–∑ namespace he.says
const nsSay = i18n.getNamespace<'hi' | 'bye'>('he.says')

// TypeScript –ø–æ–¥—Å–∫–∞–∂–µ—Ç –∏–º–µ–Ω–∞ –∫–ª—é—á–µ–π hi/bye
let hi = nsSay.t('hi', { name: 'John' })
expect(hi).toBe('') // ü§î

nsSay.on('key', (_name: 'key', key: any) => {
  if (key === 'hi')
    hi = nsSay.t('hi', { name: 'John' })
})
nsSay.on('locale', (_name: 'locale', _locale: 'en-US' | 'ru-RU') => {
  hi = nsSay.t('hi', { name: 'John' })
})

// –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –ª—é–±–æ–º namespace
const nsHe = i18n.register('he')!

nsHe.set('says.hi', { kind: 'tpl', value: 'Hi, {name}!' }, 'en-US')

expect(hi).toBe('Hi, John!') // üòÄ

nsHe.setTemplate('says.hi', '–ü—Ä–∏–≤–µ—Ç, {name}!', 'ru-RU')
i18n.change('ru-RU')
expect(hi).toBe('–ü—Ä–∏–≤–µ—Ç, John!') // ü§®

// –ù–µ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—â–∞—Ç—å—Å—è, –ø—Ä–æ–∫–∏–Ω—Ç–µ –∫–ª—é—á –∫ –∂–µ–ª–∞–µ–º–æ–º—É
nsHe.use('says.bye', 'he.says.hi')
expect(nsSay.t('bye', { name: 'John' })).toBe('–ü—Ä–∏–≤–µ—Ç, John!') // üòÇ
```

## API(–ö—Ä–∞—Ç–∫–æ)

**I18nRoot (abstract)**

* **locale** - –¢–µ–∫—É—â–∞—è –ª–æ–∫–∞–ª—å.
* **namespace** - –¢–µ–∫—É—â–∏–π namespace(string).
* **change(locale)** - –°–º–µ–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å.
* **isSupportedLocale(locale)** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ª–æ–∫–∞–ª–∏.
* **on()/off()** - –ü–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è.
* **getRoot<T>()** - –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π `I18nRoot`.
* **getNamespace<T>(namespace)** - –°–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `I18nRoot`.
* **register<T>(namespace)** - –°–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `I18nRegistry`.
* **t(key)** - –ú–µ—Ç–æ–¥(–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ), –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏–π. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω –∫ —Å—Ç—Ä–æ–∫–µ, –Ω–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è `t(key, ...)` –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ.

> `t(key)` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º. –ò–º–µ–Ω–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º. –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞: –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—è `protected _getValue(key)` –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.

* **protected _getValue(key)** - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `I18nRoot`.

**I18nRegistry (abstract)**

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–º–µ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `I18nRegistry`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ `I18nRoot.register(namespace)`. –ò–º–µ–µ—Ç —Ç–µ –∂–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –º–µ—Ç–æ–¥—ã —á—Ç–æ –∏ `I18nRoot`, –Ω–æ –¥–æ–ø–æ–ª–Ω–µ–Ω:

* **use(key, externalFullKey)** - –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ - –ø—Ä–æ–∫–∏–Ω—É—Ç—å –∫–ª—é—á –¥–æ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞.
* **set(key, value: AnyValue, locale)** - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å —Ç–∏–ø–æ–º `AnyValue` –¥–ª—è –∫–ª—é—á–∞ `key` –∏ —É–∫–∞–∑–∞–Ω–Ω–æ–π `locale`. –ó–Ω–∞—á–µ–Ω–∏—è–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–µ —Ç–∏–ø—ã, –∏—Å–∫–ª—é—á–∞—è `Nullish`(!value). 

> `set(...)` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º. –ò–º–µ–Ω–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º. –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ —Ç–∏–ø–∞ –∫ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ç–∏–ø—É –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É `protected _setValue(...)`.

* **protected _setValue(key, value, locale)** - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `I18nRegistry`.

**SharedSingleton (abstract)**

–†–∞–∑–¥–µ–ª—è–µ–º—ã–π `SharedSingleton` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å —Ñ–∞–±—Ä–∏–∫–∏ `I18nRoot` + `I18nRegistry` –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

+ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω.
+ –ü–æ–∏—Å–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –∫–ª—é—á–µ–π.
+ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –∫–ª—é—á–µ–π, –∞ —Ç–∞–∫ –∂–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π. –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–º–µ–Ω—ã –ª–æ–∫–∞–ª–∏.
+ –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —ç–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π.
+ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—à–∏–±–æ–∫.

–í—Å–µ –º–µ—Ç–æ–¥—ã _abstract_:

* **_nsFactory(...)** - –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤—ã–∑–æ–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ `return new YourI18nRoot(...)`(extends I18nRoot).
* **_rgFactory(...)** - ... —Ç–æ –∂–µ —á—Ç–æ –∏ –≤—ã—à–µ –¥–ª—è `I18nRegistry`.
* **getDefaultValue()** - –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `I18nRoot._getValue()`, –∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –∫–ª—é—á.
* **errorHandle(TErrorDetail)** - –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.

**Implemented**

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏:

* **[I18n.t(key)](./src/impl.ts)** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç—Ä–æ–∫–∏.
* **[ExI18n.t(key, Record<string, string>?)](./src/ex.ts)** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É, —à–∞–±–ª–æ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏–ª–∏ —Ç–æ–∫–µ–Ω—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ `t('hi', {name: 'John'}) => 'Hi, John!'`. 

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–∏–ø–∞

–ó–¥–µ—Å—å –∏ –¥–∞–ª–µ–µ –±—É–¥–µ—Ç —É–ø–æ–º–∏–Ω–∞—Ç—å—Å—è —Ç–∏–ø `TValue` - —ç—Ç–æ —É—Å–ª–æ–≤–Ω–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±–æ–±—â–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö(_–∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞_) –∏, –≤ —Å–∞–º–æ–º –ø—Ä–æ—Å—Ç–æ–º —Å–ª—É—á–∞–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π.

**–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `i18n` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–∏–ø–∞?**:

–í `i18n` –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö. –ú–µ—Ç–æ–¥—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `set()` –∏ –ø–æ–ª—É—á–µ–Ω–∏—è `t()` –º–æ–≥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –∫ —Ñ–æ—Ä–º–∞—Ç—É `TValue` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∫ —Å—Ç—Ä–æ–∫–µ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è [ExI18n](./src/ex.ts) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∫–ª–∞—Å—Å–æ–≤, –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ `t(, args)`.

> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã `set()` –∏ `t()`, –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö.

–í —Å–∏–ª—É —Ç–µ—Å–Ω–æ–π —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç—Ä–µ–º—è –∫–ª–∞—Å—Å–∞–º–∏ `SharedSingleton` + `I18nRoot` + `I18nRegistry`, –ø—Ä–æ—Å—Ç–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–ª–∞—Å—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –º—ã –±—ã –º–æ–≥–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ–≥–æ –¥–≤–∞ –º–µ—Ç–æ–¥–∞ `I18nRegistry.set()` + `I18nRoot.t()`, –Ω–æ –ø–µ—Ä–µ–¥–∞—á–∞ –∫–ª–∞—Å—Å–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É `SharedSingleton` –Ω–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É `TypeScript` —Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º–∏ —Ç–∏–ø–∞–º–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, `i18n` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ –∫–ª—é—á–µ–π –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–≥–æ `namespace` —á–µ—Ä–µ–∑ –¥–∂–µ–Ω–µ—Ä–∏–∫ –º–µ—Ç–æ–¥–æ–≤ `getNamespace<TKey>()` –∏ —Ç.–ø.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ set() –∏ t()**

–í—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ `value` –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–µ –∂–µ–ª–∞–µ–º—ã–µ —Ç–∏–ø—ã(—Å—Ç—Ä–æ–∫–∞, —Ç–æ–∫–µ–Ω—ã, —à–∞–±–ª–æ–Ω—ã, –∫–ª–∞—Å—Å—ã). –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫ —Ñ–æ—Ä–º–∞—Ç—É `TValue`, –∫–æ—Ç–æ—Ä—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–æ–ª–∂–µ–Ω —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ `t()`:

```ts
// I18nRegistry<TLocale, TKey, TValue>

type MultiType = string | ...

set(key: string, value: MultiType, locale: TLocale): boolean {
  const v = transformToTValue(value) // TValue
  return this._setValue(key, v, locale)
}
```

–ò–∑–≤–ª–µ–∫–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `TValue` –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É:

```ts
// I18nRoot<TLocale, TKey, TValue>

t(key: TKey, ...args: any[]): string {
  const v = this._getValue(key) // TValue or defaultValue
  return transformToString(v, ...args)
}
```

**–°–≤—è–∑—å –∫–ª–∞—Å—Å–æ–≤**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π `SharedSingleton` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–ª–∞—Å—Å–æ–≤ —Ñ–∞–±—Ä–∏—á–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:

```ts
SharedSingleton._nsFactory() // -> I18nRoot
SharedSingleton._rgFactory() // -> I18nRegistry
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `I18nRoot/I18nRegistry`, –¥–æ–ª–∂–Ω–∞ –ø–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∏–∑ `SharedSingleton` –∏ –≤—ã–≤–µ—Å—Ç–∏ –∂–µ–ª–∞–µ–º—ã–µ —Ç–∏–ø—ã –∫–ª—é—á–µ–π:

```ts
I18nRoot.getRoot<TKey>() // -> I18nRoot<TLocale, TKey>
I18nRoot.getNamespace<TKey>() // -> I18nRoot<TLocale, TKey>
I18nRoot.register<TKey>() // -> I18nRegistry<TLocale, TKey>
```

–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–æ–π—Å—Ç–≤–æ `_shared`, –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –∫–ª–∞—Å—Å–µ `SharedSingleton` –∏ –µ–≥–æ –º–µ—Ç–æ–¥–∞—Ö:

```ts
I18nRoot._shared: SharedSingleton
I18nRegistry._shared: SharedSingleton
```

–í—Å–µ –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—é—Ç –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –≥–¥–µ –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –º–µ—Ç–æ–¥–∞–º `SharedSingleton`.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞**

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–∏–ø—ã - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞. –®–∞–±–ª–æ–Ω —ç—Ç–æ –Ω–∞–±–æ—Ä –∏–∑ —Ç—Ä–µ—Ö –∫–ª–∞—Å—Å–æ–≤ —Å–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏ –≤—ã–≤–æ–¥–∏–º—ã—Ö —Ç–∏–ø–æ–≤. –®–∞–±–ª–æ–Ω –Ω–µ–ª—å–∑—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤—ã—á–Ω—ã–º `import {} from`.

–î–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–∏—Å—Ç–∏–Ω–≥ [I18n](./src/impl.ts) —Å –∫—Ä–∞—Ç–∫–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, –∏ –æ–±–Ω–æ–≤–∏—Ç—å –∏/–∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `set()` –∏ `t()`. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –≤–µ—Ä—Å–∏–∏ [ExI18n](./src/ex.ts).
